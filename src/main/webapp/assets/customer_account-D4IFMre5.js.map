{"version":3,"file":"customer_account-D4IFMre5.js","sources":["../../../../frontend/pages/customer_dashboard.js"],"sourcesContent":["window.onload = function() {\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n    if (!token) {\r\n        window.location.href = './login.html';\r\n        return;\r\n    }\r\n\r\n    fetch('/restservices/user', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            document.getElementById('username').textContent = data.username;\r\n            document.getElementById('email').textContent = data.email;\r\n            const appointmentsDiv = document.getElementById('appointments');\r\n            data.appointments.forEach(appointment => {\r\n                const appointmentDiv = document.createElement('div');\r\n                appointmentDiv.classList.add('appointment');\r\n                appointmentDiv.innerHTML = `\r\n                    <p><strong>Naam:</strong> ${appointment.receiverName}</p>\r\n                    <p><strong>Email:</strong> ${appointment.receiverEmail}</p>\r\n                    <p><strong>Datum:</strong> ${new Date(appointment.date).toLocaleDateString()}</p>\r\n                    <p><strong>Starttijd:</strong> ${new Date(appointment.startTime).toLocaleTimeString()}</p>\r\n                    <p><strong>Eindtijd:</strong> ${new Date(appointment.endTime).toLocaleTimeString()}</p>\r\n                    <p><strong>Informatie:</strong> ${appointment.information}</p>\r\n                    <p><strong>Status:</strong> <span id=\"status-${appointment.id}\">${appointment.status}</span></p>\r\n                `;\r\n                appointmentsDiv.appendChild(appointmentDiv);\r\n            })\r\n        })\r\n        .catch(error => {\r\n        console.error('Error:', error);\r\n        alert('Failed to fetch user: ' + error.message);\r\n        window.location.href = './login.html';\r\n    });\r\n    document.getElementById('change-password-btn').addEventListener('click', changePassword);\r\n};\r\n\r\nfunction changePassword() {\r\n    const newPassword = prompt(\"Voer uw nieuwe wachtwoord in:\");\r\n    if (!newPassword) {\r\n        alert(\"Wachtwoord wijzigen geannuleerd.\");\r\n        return;\r\n    }\r\n\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n    if (!token) {\r\n        window.location.href = './login.html';\r\n        return;\r\n    }\r\n\r\n    fetch('/restservices/user/password', {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ password: newPassword })\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            alert('Wachtwoord succesvol gewijzigd.');\r\n        })\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n            alert('Failed to change password: ' + error.message);\r\n        });\r\n}\r\n\r\n"],"names":["token","response","data","appointmentsDiv","appointment","appointmentDiv","error","changePassword","newPassword"],"mappings":"oHAAA,OAAO,OAAS,UAAW,CACvB,MAAMA,EAAQ,eAAe,QAAQ,OAAO,EAC5C,GAAI,CAACA,EAAO,CACR,OAAO,SAAS,KAAO,eACvB,MACH,CAED,MAAM,qBAAsB,CACxB,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYA,EAC7B,eAAgB,kBACnB,CACT,CAAK,EACI,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAQ,CACV,SAAS,eAAe,UAAU,EAAE,YAAcA,EAAK,SACvD,SAAS,eAAe,OAAO,EAAE,YAAcA,EAAK,MACpD,MAAMC,EAAkB,SAAS,eAAe,cAAc,EAC9DD,EAAK,aAAa,QAAQE,GAAe,CACrC,MAAMC,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAU,IAAI,aAAa,EAC1CA,EAAe,UAAY;AAAA,gDACKD,EAAY,YAAY;AAAA,iDACvBA,EAAY,aAAa;AAAA,iDACzB,IAAI,KAAKA,EAAY,IAAI,EAAE,mBAAkB,CAAE;AAAA,qDAC3C,IAAI,KAAKA,EAAY,SAAS,EAAE,mBAAkB,CAAE;AAAA,oDACrD,IAAI,KAAKA,EAAY,OAAO,EAAE,mBAAkB,CAAE;AAAA,sDAChDA,EAAY,WAAW;AAAA,mEACVA,EAAY,EAAE,KAAKA,EAAY,MAAM;AAAA,kBAExFD,EAAgB,YAAYE,CAAc,CAC1D,CAAa,CACb,CAAS,EACA,MAAMC,GAAS,CAChB,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,yBAA2BA,EAAM,OAAO,EAC9C,OAAO,SAAS,KAAO,cAC/B,CAAK,EACD,SAAS,eAAe,qBAAqB,EAAE,iBAAiB,QAASC,CAAc,CAC3F,EAEA,SAASA,GAAiB,CACtB,MAAMC,EAAc,OAAO,+BAA+B,EAC1D,GAAI,CAACA,EAAa,CACd,MAAM,kCAAkC,EACxC,MACH,CAED,MAAMR,EAAQ,eAAe,QAAQ,OAAO,EAC5C,GAAI,CAACA,EAAO,CACR,OAAO,SAAS,KAAO,eACvB,MACH,CAED,MAAM,8BAA+B,CACjC,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYA,EAC7B,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAU,CAAE,SAAUQ,CAAW,CAAE,CACtD,CAAK,EACI,KAAKP,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,MAAM,iCAAiC,CACnD,CAAS,EACA,MAAMK,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,8BAAgCA,EAAM,OAAO,CAC/D,CAAS,CACT"}
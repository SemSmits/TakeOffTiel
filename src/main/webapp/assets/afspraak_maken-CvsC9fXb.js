import"./modulepreload-polyfill-B5Qt9EMX.js";window.onload=function(){const n=sessionStorage.getItem("myJWT");if(!n){window.location.href="./login.html";return}fetch("/restservices/user",{method:"GET",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error("Network error. Status: "+e.status);return e.json()}).then(e=>{document.getElementById("name").value=e.realName,document.getElementById("email").value=e.email}).catch(e=>{console.error("Error:",e),alert("Failed to fetch user: "+e.message),window.location.href="./customer_dashboard.html"});const r=document.querySelectorAll(".timeslots button"),a=document.getElementById("time"),s=document.getElementById("appointmentForm");r.forEach(e=>{e.addEventListener("click",function(){r.forEach(o=>o.classList.remove("selected")),this.classList.add("selected"),a.value=this.innerText})}),s.addEventListener("submit",function(e){e.preventDefault();const o=new Date(document.getElementById("date").value),i=new Date;if(i.setHours(0,0,0,0),o<=i){alert("Je kunt geen afspraak in het verleden maken.");return}if(!a.value){alert("Selecteer een tijdslot.");return}const c=new FormData(s),l=JSON.stringify(Object.fromEntries(c.entries()));fetch("/restservices/appointment",{method:"POST",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},body:l}).then(t=>{if(t.ok)alert("Afspraak succesvol aangemaakt!"),window.location.href="./customer_dashboard.html";else{if(t.status===400)return t.json().then(m=>{throw new Error(m.error||"Voer een geldige datum in.")});throw new Error("Afspraak aanmaken mislukt.")}}).catch(t=>{console.error("Error:",t),alert(t.message)})})};
//# sourceMappingURL=afspraak_maken-CvsC9fXb.js.map

{"version":3,"file":"review_achterlaten-Dj4ud0AY.js","sources":["../../../../frontend/pages/review.js"],"sourcesContent":["window.onload = function() {\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n    if (!token) {\r\n        window.location.href = './login.html';\r\n        return;\r\n    }\r\n\r\n    fetch('/restservices/review', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(appointments => {\r\n            const appointmentList = document.getElementById('appointmentList');\r\n            appointments.forEach(appointment => {\r\n                const listItem = document.createElement('li');\r\n                listItem.classList.add('appointment');\r\n                listItem.innerHTML = `\r\n                    <div>\r\n                        <strong>${appointment.dateString} - ${appointment.timeString}</strong>\r\n                        <p>${appointment.information}</p>\r\n                    </div>\r\n                    <button class=\"leave-review-btn\" data-appointment-id=\"${appointment.id}\">Review achterlaten</button>\r\n                `;\r\n                appointmentList.appendChild(listItem);\r\n            });\r\n\r\n            document.querySelectorAll('.leave-review-btn').forEach(button => {\r\n                button.addEventListener('click', function() {\r\n                    leaveReview(this.getAttribute('data-appointment-id'));\r\n                });\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n            alert('Failed to fetch appointments: ' + error.message);\r\n        });\r\n};\r\n\r\nfunction leaveReview(appointmentId) {\r\n    const reviewContent = prompt(\"Leave your review:\");\r\n    if (reviewContent) {\r\n        const token = sessionStorage.getItem(\"myJWT\");\r\n        const review = { id: appointmentId, content: reviewContent };\r\n        fetch(`/restservices/review`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(review)\r\n        })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    alert('Review successfully submitted!');\r\n                    window.location.reload();\r\n                    return response.json()\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n                alert('Failed to submit review: ' + error.message);\r\n            });\r\n    }\r\n}\r\n"],"names":["token","response","appointments","appointmentList","appointment","listItem","button","leaveReview","error","appointmentId","reviewContent","review"],"mappings":"2EAAA,OAAO,OAAS,UAAW,CACvB,MAAMA,EAAQ,eAAe,QAAQ,OAAO,EAC5C,GAAI,CAACA,EAAO,CACR,OAAO,SAAS,KAAO,eACvB,MACH,CAED,MAAM,uBAAwB,CAC1B,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYA,EAC7B,eAAgB,kBACnB,CACT,CAAK,EACI,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAgB,CAClB,MAAMC,EAAkB,SAAS,eAAe,iBAAiB,EACjED,EAAa,QAAQE,GAAe,CAChC,MAAMC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,aAAa,EACpCA,EAAS,UAAY;AAAA;AAAA,kCAEHD,EAAY,UAAU,MAAMA,EAAY,UAAU;AAAA,6BACvDA,EAAY,WAAW;AAAA;AAAA,4EAEwBA,EAAY,EAAE;AAAA,kBAE1ED,EAAgB,YAAYE,CAAQ,CACpD,CAAa,EAED,SAAS,iBAAiB,mBAAmB,EAAE,QAAQC,GAAU,CAC7DA,EAAO,iBAAiB,QAAS,UAAW,CACxCC,EAAY,KAAK,aAAa,qBAAqB,CAAC,CACxE,CAAiB,CACjB,CAAa,CACb,CAAS,EACA,MAAMC,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,iCAAmCA,EAAM,OAAO,CAClE,CAAS,CACT,EAEA,SAASD,EAAYE,EAAe,CAChC,MAAMC,EAAgB,OAAO,oBAAoB,EACjD,GAAIA,EAAe,CACf,MAAMV,EAAQ,eAAe,QAAQ,OAAO,EACtCW,EAAS,CAAE,GAAIF,EAAe,QAASC,CAAa,EAC1D,MAAM,uBAAwB,CAC1B,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYV,EAC7B,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAUW,CAAM,CACvC,CAAS,EACI,KAAKV,GAAY,CACd,GAAIA,EAAS,GACT,aAAM,gCAAgC,EACtC,OAAO,SAAS,SACTA,EAAS,KAAM,CAE1C,CAAa,EACA,MAAMO,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,4BAA8BA,EAAM,OAAO,CACjE,CAAa,CACR,CACL"}
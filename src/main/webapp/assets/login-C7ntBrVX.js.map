{"version":3,"file":"login-C7ntBrVX.js","sources":["../../../../frontend/pages/login.js"],"sourcesContent":["document.querySelector(\"#login\").addEventListener(\"click\", function () {\r\n    event.preventDefault();\r\n\r\n    let formData = new FormData(document.querySelector(\"#loginForm\"));\r\n    let jsonRequestBody = {};\r\n    formData.forEach((value, key) => {\r\n        jsonRequestBody[key] = value;\r\n    });\r\n    console.log(jsonRequestBody);\r\n    fetch(\"/restservices/account/login\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(jsonRequestBody),\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n        .then(response => {\r\n            console.log(\"Response: \" + response.status);\r\n            if (response.ok) return response.json();\r\n            else alert(\"Ongeldig email/wachtwoord combinatie.\") ;\r\n        })\r\n        .then(myJson => {\r\n            console.log(myJson);\r\n            window.sessionStorage.setItem(\"myJWT\", myJson.JWT);\r\n\r\n            console.log(myJson.JWT);\r\n\r\n            const payload = JSON.parse(atob(myJson.JWT.split('.')[1]));\r\n            const role = payload.role;\r\n\r\n            if (role === 'admin') {\r\n                window.location.href = './admin_dashboard.html';\r\n            } else if(role === 'customer'){\r\n                window.location.href = './customer_dashboard.html';\r\n            } else {\r\n                window.location.href = './login.html';\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n});\r\n\r\n\r\n\r\n"],"names":["formData","jsonRequestBody","value","key","response","myJson","role","error"],"mappings":"yEAAA,SAAS,cAAc,QAAQ,EAAE,iBAAiB,QAAS,UAAY,CACnE,MAAM,eAAc,EAEpB,IAAIA,EAAW,IAAI,SAAS,SAAS,cAAc,YAAY,CAAC,EAC5DC,EAAkB,CAAA,EACtBD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC7BF,EAAgBE,CAAG,EAAID,CAC/B,CAAK,EACD,QAAQ,IAAID,CAAe,EAC3B,MAAM,8BAA+B,CACjC,OAAQ,OACR,KAAM,KAAK,UAAUA,CAAe,EACpC,QAAS,CACL,eAAgB,kBACnB,CACT,CAAK,EACI,KAAKG,GAAY,CAEd,GADA,QAAQ,IAAI,aAAeA,EAAS,MAAM,EACtCA,EAAS,GAAI,OAAOA,EAAS,KAAI,EAChC,MAAM,uCAAuC,CAC9D,CAAS,EACA,KAAKC,GAAU,CACZ,QAAQ,IAAIA,CAAM,EAClB,OAAO,eAAe,QAAQ,QAASA,EAAO,GAAG,EAEjD,QAAQ,IAAIA,EAAO,GAAG,EAGtB,MAAMC,EADU,KAAK,MAAM,KAAKD,EAAO,IAAI,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,EACpC,KAEjBC,IAAS,QACT,OAAO,SAAS,KAAO,yBACjBA,IAAS,WACf,OAAO,SAAS,KAAO,4BAEvB,OAAO,SAAS,KAAO,cAEvC,CAAS,EACA,MAAMC,GAAS,CACZ,QAAQ,IAAIA,CAAK,CAC7B,CAAS,CACT,CAAC"}
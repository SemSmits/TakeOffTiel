{"version":3,"file":"afspraak_maken-BKEhxXiq.js","sources":["../../../../frontend/pages/afspraak_maken.js"],"sourcesContent":["window.onload = function() {\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n    if (!token) {\r\n        window.location.href = './login.html';\r\n        return;\r\n    }\r\n\r\n    fetch('/restservices/user', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            document.getElementById('name').value = data.realName;\r\n            document.getElementById('email').value = data.email;\r\n        })\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n            alert('Failed to fetch user: ' + error.message);\r\n            window.location.href = './customer_dashboard.html';\r\n        });\r\n\r\n    const timeButtons = document.querySelectorAll(\".timeslots button\");\r\n    const timeInput = document.getElementById(\"time\");\r\n    const form = document.getElementById(\"appointmentForm\");\r\n\r\n    timeButtons.forEach(button => {\r\n        button.addEventListener(\"click\", function() {\r\n            timeButtons.forEach(btn => btn.classList.remove(\"selected\"));\r\n            this.classList.add(\"selected\");\r\n            timeInput.value = this.innerText;\r\n        });\r\n    });\r\n\r\n    form.addEventListener(\"submit\", function(event) {\r\n        event.preventDefault();\r\n\r\n        // const selectedDate = new Date(document.getElementById(\"date\").value);\r\n        // const currentDate = new Date();\r\n        //\r\n        // currentDate.setHours(0, 0, 0, 0);\r\n        //\r\n        // if (selectedDate <= currentDate) {\r\n        //     alert(\"Je kunt geen afspraak in het verleden maken.\");\r\n        //     return;\r\n        // }\r\n\r\n        if (!timeInput.value) {\r\n            alert(\"Selecteer een tijdslot.\");\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData(form);\r\n        const jsonData = JSON.stringify(Object.fromEntries(formData.entries()));\r\n\r\n        fetch('/restservices/appointment', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: jsonData\r\n        })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    alert('Afspraak succesvol aangemaakt!');\r\n                    window.location.href = './customer_dashboard.html';\r\n                } else if (response.status === 400) {\r\n                    return response.json().then(error => {\r\n                        throw new Error(error.error || 'Voer een geldige datum in.');\r\n                    });\r\n                } else {\r\n                    throw new Error('Afspraak aanmaken mislukt.');\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n                alert(error.message);\r\n            });\r\n    });\r\n};\r\n"],"names":["token","response","data","error","timeButtons","timeInput","form","button","btn","event","formData","jsonData"],"mappings":"yEAAA,OAAO,OAAS,UAAW,CACvB,MAAMA,EAAQ,eAAe,QAAQ,OAAO,EAC5C,GAAI,CAACA,EAAO,CACR,OAAO,SAAS,KAAO,eACvB,MACH,CAED,MAAM,qBAAsB,CACxB,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYA,EAC7B,eAAgB,kBACnB,CACT,CAAK,EACI,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAQ,CACV,SAAS,eAAe,MAAM,EAAE,MAAQA,EAAK,SAC7C,SAAS,eAAe,OAAO,EAAE,MAAQA,EAAK,KAC1D,CAAS,EACA,MAAMC,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,yBAA2BA,EAAM,OAAO,EAC9C,OAAO,SAAS,KAAO,2BACnC,CAAS,EAEL,MAAMC,EAAc,SAAS,iBAAiB,mBAAmB,EAC3DC,EAAY,SAAS,eAAe,MAAM,EAC1CC,EAAO,SAAS,eAAe,iBAAiB,EAEtDF,EAAY,QAAQG,GAAU,CAC1BA,EAAO,iBAAiB,QAAS,UAAW,CACxCH,EAAY,QAAQI,GAAOA,EAAI,UAAU,OAAO,UAAU,CAAC,EAC3D,KAAK,UAAU,IAAI,UAAU,EAC7BH,EAAU,MAAQ,KAAK,SACnC,CAAS,CACT,CAAK,EAEDC,EAAK,iBAAiB,SAAU,SAASG,EAAO,CAa5C,GAZAA,EAAM,eAAc,EAYhB,CAACJ,EAAU,MAAO,CAClB,MAAM,yBAAyB,EAC/B,MACH,CAED,MAAMK,EAAW,IAAI,SAASJ,CAAI,EAC5BK,EAAW,KAAK,UAAU,OAAO,YAAYD,EAAS,QAAS,CAAA,CAAC,EAEtE,MAAM,4BAA6B,CAC/B,OAAQ,OACR,QAAS,CACL,cAAiB,UAAYV,EAC7B,eAAgB,kBACnB,EACD,KAAMW,CAClB,CAAS,EACI,KAAKV,GAAY,CACd,GAAIA,EAAS,GACT,MAAM,gCAAgC,EACtC,OAAO,SAAS,KAAO,gCACpB,IAAIA,EAAS,SAAW,IAC3B,OAAOA,EAAS,OAAO,KAAKE,GAAS,CACjC,MAAM,IAAI,MAAMA,EAAM,OAAS,4BAA4B,CACnF,CAAqB,EAED,MAAM,IAAI,MAAM,4BAA4B,EAEhE,CAAa,EACA,MAAMA,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAMA,EAAM,OAAO,CACnC,CAAa,CACb,CAAK,CACL"}
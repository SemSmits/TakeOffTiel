{"version":3,"file":"afspraak_beheren-C0W9ncCa.js","sources":["../../../../frontend/pages/afspraak_beheer.js"],"sourcesContent":["window.onload = function () {\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n    if (!token) {\r\n        window.location.href = './login.html';\r\n        return;\r\n    }\r\n\r\n    fetch('/restservices/user', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            const appointmentsDiv = document.getElementById('appointments');\r\n            data.appointments\r\n                .filter(appointment => appointment.status !== 'denied')\r\n                .forEach(appointment => {\r\n                const appointmentDiv = document.createElement('div');\r\n                appointmentDiv.classList.add('appointment');\r\n                appointmentDiv.innerHTML = `\r\n                    <p><strong>Naam:</strong> ${appointment.receiverName}</p>\r\n                    <p><strong>Email:</strong> ${appointment.receiverEmail}</p>\r\n                    <p><strong>Datum:</strong> ${new Date(appointment.date).toLocaleDateString()}</p>\r\n                    <p><strong>Starttijd:</strong> ${new Date(appointment.startTime).toLocaleTimeString()}</p>\r\n                    <p><strong>Eindtijd:</strong> ${new Date(appointment.endTime).toLocaleTimeString()}</p>\r\n                    <p><strong>Informatie:</strong> ${appointment.information}</p>\r\n                    <p><strong>Status:</strong> <span id=\"status-${appointment.id}\">${appointment.status}</span></p>\r\n                    <button class=\"accept-btn\" data-id=\"${appointment.id}\">Accepteer</button>\r\n                    <button class=\"deny-btn\" data-id=\"${appointment.id}\">Weiger</button>\r\n                `;\r\n                appointmentsDiv.appendChild(appointmentDiv);\r\n            });\r\n\r\n            document.querySelectorAll('.accept-btn').forEach(button => {\r\n                button.addEventListener('click', () => {\r\n                    const appointmentId = button.getAttribute('data-id');\r\n                    updateAppointmentStatus(appointmentId, 'accepted');\r\n                });\r\n            });\r\n\r\n            document.querySelectorAll('.deny-btn').forEach(button => {\r\n                button.addEventListener('click', () => {\r\n                    const appointmentId = button.getAttribute('data-id');\r\n                    updateAppointmentStatus(appointmentId, 'denied');\r\n                });\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n            alert('Failed to fetch user: ' + error.message);\r\n            window.location.href = './admin_dashboard.html';\r\n        });\r\n};\r\n\r\nfunction updateAppointmentStatus(appointmentId, status) {\r\n    const token = sessionStorage.getItem(\"myJWT\");\r\n\r\n    fetch(`/restservices/appointment/${appointmentId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token,\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({status: status})\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network error. Status: ' + response.status);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            const statusElement = document.getElementById(`status-${appointmentId}`);\r\n            statusElement.textContent = status;\r\n\r\n            if (status === 'denied') {\r\n                const appointmentDiv = document.getElementById(`appointment-${appointmentId}`);\r\n                if (appointmentDiv) {\r\n                    appointmentDiv.remove();\r\n                }\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Error:', error);\r\n            alert('Failed to update appointment: ' + error.message);\r\n        });\r\n}\r\n"],"names":["token","response","data","appointmentsDiv","appointment","appointmentDiv","button","appointmentId","updateAppointmentStatus","error","status","statusElement"],"mappings":"oFAAA,OAAO,OAAS,UAAY,CACxB,MAAMA,EAAQ,eAAe,QAAQ,OAAO,EAC5C,GAAI,CAACA,EAAO,CACR,OAAO,SAAS,KAAO,eACvB,MACH,CAED,MAAM,qBAAsB,CACxB,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYA,EAC7B,eAAgB,kBACnB,CACT,CAAK,EACI,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAQ,CACV,MAAMC,EAAkB,SAAS,eAAe,cAAc,EAC9DD,EAAK,aACA,OAAOE,GAAeA,EAAY,SAAW,QAAQ,EACrD,QAAQA,GAAe,CACxB,MAAMC,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAU,IAAI,aAAa,EAC1CA,EAAe,UAAY;AAAA,gDACKD,EAAY,YAAY;AAAA,iDACvBA,EAAY,aAAa;AAAA,iDACzB,IAAI,KAAKA,EAAY,IAAI,EAAE,mBAAkB,CAAE;AAAA,qDAC3C,IAAI,KAAKA,EAAY,SAAS,EAAE,mBAAkB,CAAE;AAAA,oDACrD,IAAI,KAAKA,EAAY,OAAO,EAAE,mBAAkB,CAAE;AAAA,sDAChDA,EAAY,WAAW;AAAA,mEACVA,EAAY,EAAE,KAAKA,EAAY,MAAM;AAAA,0DAC9CA,EAAY,EAAE;AAAA,wDAChBA,EAAY,EAAE;AAAA,kBAEtDD,EAAgB,YAAYE,CAAc,CAC1D,CAAa,EAED,SAAS,iBAAiB,aAAa,EAAE,QAAQC,GAAU,CACvDA,EAAO,iBAAiB,QAAS,IAAM,CACnC,MAAMC,EAAgBD,EAAO,aAAa,SAAS,EACnDE,EAAwBD,EAAe,UAAU,CACrE,CAAiB,CACjB,CAAa,EAED,SAAS,iBAAiB,WAAW,EAAE,QAAQD,GAAU,CACrDA,EAAO,iBAAiB,QAAS,IAAM,CACnC,MAAMC,EAAgBD,EAAO,aAAa,SAAS,EACnDE,EAAwBD,EAAe,QAAQ,CACnE,CAAiB,CACjB,CAAa,CACb,CAAS,EACA,MAAME,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,yBAA2BA,EAAM,OAAO,EAC9C,OAAO,SAAS,KAAO,wBACnC,CAAS,CACT,EAEA,SAASD,EAAwBD,EAAeG,EAAQ,CACpD,MAAMV,EAAQ,eAAe,QAAQ,OAAO,EAE5C,MAAM,6BAA6BO,CAAa,GAAI,CAChD,OAAQ,MACR,QAAS,CACL,cAAiB,UAAYP,EAC7B,eAAgB,kBACnB,EACD,KAAM,KAAK,UAAU,CAAC,OAAQU,CAAM,CAAC,CAC7C,CAAK,EACI,KAAKT,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,0BAA4BA,EAAS,MAAM,EAE/D,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAQ,CACV,MAAMS,EAAgB,SAAS,eAAe,UAAUJ,CAAa,EAAE,EAGvE,GAFAI,EAAc,YAAcD,EAExBA,IAAW,SAAU,CACrB,MAAML,EAAiB,SAAS,eAAe,eAAeE,CAAa,EAAE,EACzEF,GACAA,EAAe,OAAM,CAE5B,CACb,CAAS,EACA,MAAMI,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,EAC7B,MAAM,iCAAmCA,EAAM,OAAO,CAClE,CAAS,CACT"}